# מערכת ניהול תיק השקעות

מערכת מתקדמת לניהול תיק השקעות הבנויה בשפת Python עם Flask, הכוללת בינה מלאכותית לייעוץ השקעות, מעקב אחר מחירי מניות בזמן אמת, וניתוח סיכונים מתקדם.

## תיאור המערכת

המערכת מספקת פלטפורמה מקיפה לניהול תיק השקעות אישי הכוללת:

- ניהול מניות, אגרות חוב ותכשירים פיננסיים אחרים
- מעקב אחר מחירים בזמן אמת מ-Alpha Vantage API
- ייעוץ השקעות מותאם אישית באמצעות בינה מלאכותית (Ollama)
- ניתוח סיכונים ויזואליזציה של הנתונים
- ממשק משתמש מתקדם בעברית
- מערכת אבטחה מתקדמת עם אימות משתמשים

## דרישות מקדימות

### תוכנות נדרשות:
- Python 3.8 ומעלה
- pip (מנהל חבילות Python)
- Git
- MySQL או SQLite (למסד נתונים)
- Ollama (אופציונלי - לייעוץ בינה מלאכותית)

### מפתחות API נדרשים:
- Alpha Vantage API Key (חינם ב-alphavantage.co)

## התקנה ראשונית

### שלב 1: הורדת הפרויקט
```bash
git clone https://github.com/Tomerkn/tomerINV.git
cd tomerINV
```

### שלב 2: התקנת תלויות Python
```bash
pip install -r requirements.txt
```

### שלב 3: הכנת סביבת העבודה
```bash
python setup_local.py
```

סקריפט זה יבדוק ויתקין את כל הדרישות הנדרשות.

### שלב 4: הוספת מניות לדוגמה (אופציונלי)
```bash
python add_sample_stocks.py
```

זה יוסיף מניות אמריקאיות וישראליות לדוגמה למסד הנתונים.

## הפעלת המערכת

### הפעלה פשוטה
```bash
python run_local.py
```

### הפעלה על פורט ספציפי (אם 5000 תפוס)
```bash
python -c "from app import app; app.run(host='127.0.0.1', port=8080, debug=True)"
```

### הפעלה ישירה של האפליקציה
```bash
python app.py
```

## גישה למערכת

לאחר הפעלת המערכת, גש לכתובת:
- http://localhost:5000 (ברירת מחדל)
- http://localhost:8080 (אם השתמשת בפורט 8080)

### פרטי התחברות
המערכת מגיעה עם שני משתמשים מוגדרים מראש:

**מנהל מערכת:**
- שם משתמש: admin
- סיסמה: admin

**משתמש רגיל:**
- שם משתמש: user
- סיסמה: user

## תכונות המערכת

### ניהול תיק השקעות
- הוספה והסרה של מניות ואגרות חוב
- מעקב אחר כמויות וערכים
- חישוב ביצועים ורווחים/הפסדים
- קטגוריזציה לפי ענפים וסוגי נכסים

### ייעוץ בינה מלאכותית
- ניתוח התיק הקיים
- המלצות השקעה מותאמות אישית
- ייעוץ בנושא גיוון ופיזור סיכונים
- ייעוץ מבוסס על מידע עדכני של השוק

### ניתוח סיכונים
- חישוב רמת סיכון כוללת של התיק
- פילוח סיכונים לפי נכסים
- המלצות לאיזון סיכונים
- ויזואליזציה של התפלגות הסיכונים

### גרפים ותרשימים
- תרשים עוגה של התפלגות השקעות
- גרפי ביצועים לאורך זמן
- השוואת ביצועי נכסים שונים
- תצוגה ויזואלית של נתוני השוק

### מעקב מחירים
- מחירים עדכניים מ-Alpha Vantage
- מטבעות: דולר, יורו, שקל
- עדכון אוטומטי של מחירים
- היסטוריית מחירים

## הגדרת Ollama (בינה מלאכותית)

### התקנת Ollama
```bash
# macOS
brew install ollama

# Linux
curl -fsSL https://ollama.ai/install.sh | sh
```

### הפעלת שירות Ollama
```bash
ollama serve
```

### הורדת מודל שפה
```bash
ollama pull llama3.1:8b
```

### בדיקת פעילות Ollama
```bash
curl http://localhost:11434/api/version
```

## הגדרת מפתח Alpha Vantage

1. גש ל-https://www.alphavantage.co/support/#api-key
2. הירשם וקבל מפתח API חינם
3. הוסף את המפתח בקובץ dbmodel.py במערך api_keys

## פתרון בעיות נפוצות

### פורט 5000 תפוס
```bash
# בדוק מה תופס את הפורט
lsof -i :5000

# הפעל על פורט אחר
python -c "from app import app; app.run(port=8080)"
```

### בעיות חיבור למסד נתונים
המערכת תעבור אוטומטית ל-SQLite אם MySQL לא זמין.

### Ollama לא זמין
המערכת תמשיך לפעול בלי ייעוץ AI אם Ollama לא זמין.

### שגיאות מפתח API
בדוק שהמפתח של Alpha Vantage תקין ולא הגיע למגבלת השימוש היומית.

## מבנה הפרויקט

```
tomerINV/
├── app.py                 # אפליקציית Flask הראשית
├── dbmodel.py             # מודל מסד הנתונים
├── ollamamodel.py         # מודל בינה מלאכותית
├── run_local.py           # סקריפט הפעלה מקומית
├── setup_local.py         # סקריפט התקנה והכנה
├── add_sample_stocks.py   # הוספת נתונים לדוגמה
├── requirements.txt       # תלויות Python
├── templates/             # תבניות HTML
│   ├── base.html          # תבנית בסיס
│   ├── index.html         # עמוד ראשי
│   ├── portfolio.html     # תצוגת תיק
│   ├── advice.html        # עמוד ייעוץ
│   ├── graph.html         # גרפים ותרשימים
│   ├── risk.html          # ניתוח סיכונים
│   └── ...               # עמודים נוספים
└── instance/             # קבצי מסד נתונים מקומיים
```

## פיתוח וקביעת תצורה

### הפעלה במצב פיתוח
```bash
export FLASK_ENV=development
export FLASK_DEBUG=1
python app.py
```

### הגדרת משתני סביבה
```bash
export DATABASE_URL="mysql://user:pass@localhost/tomerinv"
export OLLAMA_URL="http://localhost:11434"
export ALPHA_VANTAGE_KEY="your_api_key_here"
```

### בדיקת בריאות המערכת
גש ל-http://localhost:5000/health לבדיקת תקינות המערכת.

## אבטחה

המערכת כוללת:
- הצפנת סיסמאות
- הגנה על הפעלות מנהל
- אימות משתמשים
- הגנה מפני CSRF
- מנגנוני cache מאובטחים

## תמיכה ועזרה

בעיות נפוצות ופתרונות:

1. **המערכת לא נטענת**: בדוק שכל התלויות מותקנות בcorrectly
2. **לא מקבל מחירי מניות**: בדוק את מפתח Alpha Vantage
3. **Ollama לא עובד**: וודא שהשירות רץ על פורט 11434
4. **שגיאות מסד נתונים**: המערכת תעבור אוטומטית ל-SQLite

## רישיון

פרויקט זה פותח למטרות אקדמיות ולימוד.

## יוצרים ותרומה

פותח כפרויקט סיום קורס לניהול תיקי השקעות.

לדיווח על בעיות או הצעות שיפור, פתח issue ב-GitHub. 