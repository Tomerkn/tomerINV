# Dockerfile for Ollama in Railway - Minimal version
FROM ollama/ollama:latest

# Set environment variables
ENV OLLAMA_HOST=0.0.0.0:11434

# Expose port
EXPOSE 11434

# Create startup script that only starts the server
RUN echo '#!/bin/bash\n\
set -e\n\
echo "ðŸš€ Starting minimal Ollama server..."\n\
echo "ðŸ“¦ No model pre-installed to save disk space"\n\
echo "ðŸ”„ Models will be downloaded on first use"\n\
ollama serve' > /start-ollama.sh && chmod +x /start-ollama.sh

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:11434/api/tags || exit 1

# Start Ollama
CMD ["/start-ollama.sh"] 